<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title th:text="${libro.id != null} ? 'Editar Libro' : 'Nuevo Libro'">Formulario Libro | BookFlow</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<link rel="stylesheet" th:href="@{/Css/gestionLibrosForm.css}"> 
</head>

<body class="bg-light">

	<div class="container py-5">
		<div class="row justify-content-center">
			<div class="col-lg-8">
				<div class="card shadow-lg form-card">
					<div class="card-header bg-primary text-white header-form">
						<h4 class="mb-0 fw-bold" th:text="${libro.id != null} ? 'Editar Libro' : 'Registrar Nuevo Libro'">
							<i class="bi bi-pencil-square me-2" th:if="${libro.id != null}"></i>
							<i class="bi bi-journal-plus me-2" th:unless="${libro.id != null}"></i>
							Formulario Libro
						</h4>
					</div>
					<div class="card-body p-4">

						<form th:action="@{/trabajador/libros/guardar}" th:object="${libro}" method="post">
							<input type="hidden" th:field="*{id}">

							<div class="row g-4">
								
								<div class="col-md-8">
									<label for="titulo" class="form-label fw-semibold">Título</label>
									<input type="text" th:field="*{titulo}" id="titulo" class="form-control" required placeholder="Ej: Cien años de soledad">
								</div>
								<div class="col-md-4">
									<label for="isbn" class="form-label fw-semibold">ISBN</label>
									<input type="text" th:field="*{isbn}" id="isbn" class="form-control" required placeholder="Ej: 978-0321765723">
								</div>

								<div class="col-md-6">
									<label for="precio" class="form-label fw-semibold">Precio (S/)</label>
									<input type="number" th:field="*{precio}" id="precio" class="form-control" step="0.01" min="0" required>
								</div>
								<div class="col-md-6">
									<label for="stock" class="form-label fw-semibold">Stock</label>
									<input type="number" th:field="*{stock}" id="stock" class="form-control" min="0" required>
								</div>
								
								<div class="col-12 border-top pt-3">
                                    <h6 class="text-primary-dark fw-bold mb-3">Datos de Proveeduría</h6>
                                    <div class="row g-3">
                                        <div class="col-md-6">
                                            <label for="editorial" class="form-label">Editorial</label>
                                            <select th:field="*{editorial.id}" id="editorial" class="form-select" required>
                                                <option value="">-- Seleccione una Editorial --</option>
                                                <option th:each="e : ${editoriales}" th:value="${e.id}" th:text="${e.nombre}"></option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="proveedor" class="form-label">Proveedor</label>
                                            <select th:field="*{proveedor.id}" id="proveedor" class="form-select" required>
                                                <option value="">-- Seleccione un Proveedor --</option>
                                                <option th:each="p : ${proveedores}" th:value="${p.id}" th:text="${p.nombre}"></option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
								
								<div class="col-12 border-top pt-3">
                                    <h6 class="text-primary-dark fw-bold mb-3">Clasificación y Publicación</h6>
                                    <div class="row g-3">
                                        <div class="col-md-4">
                                            <label for="categoria" class="form-label">Categoría</label>
                                            <select th:field="*{categoria.id}" id="categoria" class="form-select" required>
                                                <option value="">-- Seleccione una Categoría --</option>
                                                <option th:each="c : ${categorias}" th:value="${c.id}" th:text="${c.nombre}"></option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="autor" class="form-label">Autor</label>
                                            <select th:field="*{autor.id}" id="autor" class="form-select" required>
                                                <option value="">-- Seleccione un Autor --</option>
                                                <option th:each="a : ${autores}" th:value="${a.id}" th:text="${a.nombre}"></option>
                                            </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="fechaPublicacion" class="form-label">Fecha de Publicación</label>
                                            <input type="date" th:field="*{fechaPublicacion}" id="fechaPublicacion" class="form-control" required>
                                        </div>
                                    </div>
								</div>

								<div class="col-12 border-top pt-3">
									<label for="imagenUrl" class="form-label fw-semibold">URL de Portada</label>
									<input type="url" th:field="*{imagenUrl}" id="imagenUrl" class="form-control" placeholder="https://ejemplo.com/portada.jpg">
								</div>

								<div class="col-12">
									<label for="descripcion" class="form-label fw-semibold">Descripción del Libro</label>
									<textarea th:field="*{descripcion}" id="descripcion" class="form-control" rows="4"></textarea>
								</div>
							</div>

							<div class="d-flex justify-content-end mt-5 border-top pt-4">
								<a th:href="@{/trabajador/libros}" class="btn btn-outline-secondary me-3 btn-lg">
									<i class="bi bi-x-circle-fill me-2"></i> Cancelar
								</a>
								<button type="submit" class="btn btn-primary-custom btn-lg">
									<i class="bi bi-save-fill me-2"></i> Guardar Libro
								</button>
							</div>
						</form>

					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>