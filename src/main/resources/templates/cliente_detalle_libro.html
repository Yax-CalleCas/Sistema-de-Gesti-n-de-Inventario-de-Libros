<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
<meta charset="UTF-8">
<title th:text="'Detalles de ' + ${libro.titulo}">Detalles del
	Libro</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
	rel="stylesheet">
<link rel="stylesheet" th:href="@{/Css/clientedetallelibro.css}">
</head>
<body class="bg-light">

	<!-- Cabecera -->
	<div th:replace="fragments/cliente_header :: header"></div>

	<div class="container py-5">
		<a th:href="@{/cliente}" class="btn btn-outline-success mb-4"> <i
			class="fa-solid fa-arrow-left"></i> Volver al Catálogo
		</a>

		<div class="row g-5">
			<!-- Portada -->
			<div class="col-md-5 text-center">
				<img
					th:src="${libro.imagenUrl != null ? libro.imagenUrl : '/img/libro-default.jpg'}"
					alt="Portada del libro" class="portada">
				<div class="mt-3">
					<span th:if="${libro.descuento != null and libro.descuento > 0}"
						class="badge-descuento"
						th:text="${(libro.descuento * 100) + '% de descuento'}"></span>
				</div>
			</div>

			<!-- Información del libro -->
			<div class="col-md-7">
				<h2 class="fw-bold text-dark" th:text="${libro.titulo}">Título
					del libro</h2>
				<p class="text-muted fs-5 mb-1" th:text="${libro.autor.nombre}">Autor</p>
				<p class="text-secondary small" th:text="'ISBN: ' + ${libro.isbn}"></p>

				<!-- Precio -->
				<div class="my-3">
					<span class="precio-final"
						th:text="'S/ ' + ${libro.getPrecioFinal()}"></span> <span
						th:if="${libro.descuento != null and libro.descuento > 0}"
						class="precio-original" th:text="'S/ ' + ${libro.precio}"></span>
				</div>

				<!-- Stock -->
				<p th:if="${libro.stock > 0}" class="text-success small">
					<i class="fa-solid fa-box"></i> Disponible (Stock: <span
						th:text="${libro.stock}"></span>)
				</p>
				<p th:if="${libro.stock == 0}" class="text-danger small">
					<i class="fa-solid fa-triangle-exclamation"></i> Producto agotado
				</p>

				<!-- Descripción -->
				<div class="mt-4">
					<h5 class="fw-semibold">📖 Descripción</h5>
					<p class="descripcion" th:text="${libro.descripcion}"></p>
				</div>

				<!-- Información adicional -->
				<div class="info-libro mt-4">
					<ul class="list-unstyled">
						<li><i class="fa-solid fa-calendar"></i> Publicado el: <span
							th:text="${#temporals.format(libro.fechaPublicacion, 'dd/MM/yyyy')}"></span></li>
						<li><i class="fa-solid fa-language"></i> Idioma: <span
							th:text="${libro.idioma}"></span></li>
						<li><i class="fa-solid fa-layer-group"></i> Categoría: <span
							th:text="${libro.categoria.nombre}"></span></li>
						<li><i class="fa-solid fa-book-open"></i> Páginas: <span
							th:text="${libro.numeroPaginas}"></span></li>
						<li><i class="fa-solid fa-building"></i> Editorial: <span
							th:text="${libro.editorial.nombre}"></span></li>
					</ul>
				</div>

				<!-- Formulario para agregar al carrito -->
				<div class="mt-4">
					<form th:action="@{/carrito/agregar/{id}(id=${libro.id})}"
						method="post" class="d-flex">
						<input type="number" name="cantidad" value="1" min="1"
							th:attr="max=${libro.stock}" class="form-control me-2"
							style="max-width: 100px;">
						<button type="submit" class="btn btn-success"
							th:disabled="${libro.stock == 0}">
							<i class="fa-solid fa-cart-plus"></i> Agregar al Carrito
						</button>
					</form>
				</div>
			</div>
		</div>
	</div>

	<!-- Footer -->
	<div th:replace="fragments/cliente_footer :: footer"></div>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
