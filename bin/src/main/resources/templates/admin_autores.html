<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Gestión de Autores</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<style>
/* Estilos para copiar el diseño del Admin (Púrpura/Violeta) */

/* Fondo del Cuerpo */
body {
    background-color: #f9fafc; /* Fondo gris muy claro */
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Navbar */
.navbar-custom {
    background-color: rgb(64, 0, 128); /* Púrpura oscuro */
    border-color: rgb(50, 0, 100);
}

.navbar-custom .navbar-brand {
    color: #fff; /* Texto blanco */
    font-weight: 600;
}

/* Encabezado de la tabla */
.table thead tr {
    background-color: rgb(128, 0, 255); /* Púrpura más claro */
    color: white; /* Texto blanco */
    border-color: rgb(100, 0, 200);
}

/* Filas del cuerpo de la tabla (hover) */
.table tbody tr:hover {
    background-color: #f5f5f5; /* Fondo gris claro al pasar el ratón */
}

/* Botones */
/* Botones de Volver y Editar (btn-info) */
.btn-info { 
    background-color: rgb(128, 0, 255);
    border-color: rgb(100, 0, 200);
}

.btn-info:hover, .btn-info:focus {
    background-color: rgb(100, 0, 200);
    border-color: rgb(80, 0, 160);
    color: white;
}

/* Botón Nuevo Autor (btn-success) */
.btn-success { 
    background-color: rgb(64, 0, 128);
    border-color: rgb(50, 0, 100);
}

.btn-success:hover, .btn-success:focus {
    background-color: rgb(50, 0, 100);
    border-color: rgb(30, 0, 60);
    color: white;
}

/* Estilo para los botones de acción para separarlos ligeramente */
.action-buttons a {
    margin-right: 5px;
}

/* Ajuste para la imagen del autor */
img[alt="Foto del Autor"] {
    border: 1px solid #ddd; /* Borde sutil para destacar la foto */
}

/* Separador horizontal */
hr {
    border-top: 1px solid #e0e0e0;
}
</style>
</head>
<body>

	<nav class="navbar navbar-custom navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="/admin">Panel de Administración</a>
			</div>
		</div>
	</nav>

	<div class="container" style="margin-top: 80px;">
		
        <div class="row">
            <div class="col-xs-12">
                <h2 class="pull-left">Gestión de Autores</h2>
                <div class="pull-right">
                    <a th:href="@{/admin/autores/nuevo}" class="btn btn-success">+ Nuevo Autor</a> 
                    <a th:href="@{/admin}" class="btn btn-info">Volver</a>
                </div>
            </div>
        </div>
        
        <hr> 
        <table class="table table-striped table-bordered table-hover">
			<thead>
				<tr>
					<th class="col-md-1">ID</th>
					<th class="col-md-1">Foto</th> 
					<th class="col-md-2">Nombre</th>
					<th class="col-md-1">Nacionalidad</th>
					<th class="col-md-4">Biografía</th> 
					<th class="col-md-1">Nacimiento</th> 
					<th class="col-md-2">Acciones</th> 
				</tr>
			</thead>
			<tbody>
				<tr th:each="autor : ${autores}">
					<td th:text="${autor.id}"></td>
					
					<td class="text-center">
					    <img th:if="${autor.urlImagen != null and autor.urlImagen != ''}"
					         th:src="${autor.urlImagen}"
					         alt="Foto del Autor"
					         style="max-width: 50px; max-height: 50px; border-radius: 4px; object-fit: cover;">
					    <span th:unless="${autor.urlImagen != null and autor.urlImagen != ''}" class="text-muted">
					        N/A
					    </span>
					</td>
					
					<td th:text="${autor.nombre}"></td>
					
					<td th:text="${autor.nacionalidad}"></td>
					
					<td>
                        <th:block th:with="bio=${#strings.defaultString(autor.biografia, '')}">
                            <span th:text="${#strings.length(bio) > 50 
                                ? #strings.substring(bio, 0, 50) + '...' 
                                : bio}">
                            </span>
                            <span th:if="${#strings.isEmpty(bio)}" class="text-muted">Sin biografía</span>
                        </th:block>
                    </td>
                    
					<td th:text="${autor.fechaNacimiento != null ? #temporals.format(autor.fechaNacimiento, 'dd-MM-yyyy') : 'Desconocida'}"></td>
					
					<td class="action-buttons">
                        <a th:href="@{'/admin/autores/editar/' + ${autor.id}}"
						    class="btn btn-info btn-sm" title="Editar">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> </a> 
                        <a th:href="@{'/admin/autores/eliminar/' + ${autor.id}}"
						    class="btn btn-danger btn-sm"
						    onclick="return confirm('¿Seguro que deseas eliminar este autor?')" title="Eliminar">
                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> </a>
					</td>
				</tr>
				<tr th:if="${#lists.isEmpty(autores)}">
					<td colspan="7" class="text-center text-muted">No hay autores
						registrados.</td> 
				</tr>
			</tbody>
		</table>
	</div>
<div th:replace="fragments/footer :: siteFooter"></div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>