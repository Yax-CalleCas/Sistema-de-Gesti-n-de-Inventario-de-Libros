<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Gestión de Usuarios | Panel de Administración</title>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
	rel="stylesheet">

<link
	href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
	rel="stylesheet">


</head>
<body class="bg-light">

	<div class="container py-5">
		<div class="d-flex justify-content-between align-items-center mb-5">
			<h2 class="page-title">
				<i class="fa fa-users me-2"></i> Gestión de Usuarios
			</h2>
			<div>
				<a th:href="@{/admin}" class="btn btn-secondary"> <i
					class="fa fa-arrow-left me-2"></i> Volver al Panel
				</a> <a th:href="@{/admin/usuarios/nuevo}" class="btn btn-success ms-2">
					<i class="fa fa-plus me-2"></i> Nuevo Usuario perro
				</a>
			</div>
		</div>

		<div th:if="${msgExito}"
			class="alert alert-success alert-dismissible fade show" role="alert">
			<i class="fa fa-check-circle me-2"></i> <span th:text="${msgExito}"></span>
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>
		<div th:if="${msgError}"
			class="alert alert-danger alert-dismissible fade show" role="alert">
			<i class="fa fa-exclamation-circle me-2"></i> <span
				th:text="${msgError}"></span>
			<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
		</div>

		<div class="card shadow-lg">
			<div class="card-body p-4">
				<div class="table-responsive">
					<table class="table table-hover align-middle">
						<thead>
							<tr>
								<th class="text-center">Foto</th>
								<th>Nombre</th>
								<th>Apellido</th>
								<th>Email</th>
								<th class="text-center">Rol</th>
								<th class="text-center">Estado</th>
								<th class="text-center">Acciones</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="u : ${usuarios}">
								<td class="text-center"><img th:src="${u.imagenUrl}"
									alt="foto" class="rounded-circle user-avatar" width="50"
									height="50"
									onerror="this.src='https://via.placeholder.com/50/0d6efd/FFFFFF?text=U'">
								</td>
								<td th:text="${u.nombre}" class="fw-semibold"></td>
								<td th:text="${u.apellido}"></td>
								<td th:text="${u.email}"></td>
								<td class="text-center"><span
									class="badge bg-info text-dark" th:text="${u.rol.nombre}">ROL</span>
								</td>
								<td class="text-center"><span th:if="${u.enabled}"
									class="badge bg-success">Activo</span> <span
									th:unless="${u.enabled}" class="badge bg-secondary">Inactivo</span>
								</td>
								<td class="text-center"><a
									th:href="@{'/admin/usuarios/editar/' + ${u.id}}"
									class="btn btn-sm btn-warning me-2"> <i class="fa fa-edit"></i>
								</a> <a th:href="@{'/admin/usuarios/eliminar/' + ${u.id}}"
									class="btn btn-sm btn-danger"
									onclick="return confirm('¿Seguro que deseas eliminar este usuario?');">
										<i class="fa fa-trash"></i>
								</a></td>
							</tr>
							<tr th:if="${usuarios == null or #lists.isEmpty(usuarios)}">
								<td colspan="7" class="text-center text-muted py-4"><i
									class="fa fa-info-circle me-2"></i> No hay usuarios registrados
									en el sistema.</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>